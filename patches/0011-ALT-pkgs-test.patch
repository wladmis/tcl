From 94eaa568ca1e7b12ee3a1df0d83d45847e1a4424 Mon Sep 17 00:00:00 2001
From: "Vladimir D. Seleznev" <vseleznv@altlinux.org>
Date: Tue, 8 Oct 2019 18:35:46 +0300
Subject: [PATCH] ALT pkgs test

Make pkgs test work.
---
 tcl/pkgs/itcl4.2.1/Makefile.in         | 2 +-
 tcl/pkgs/sqlite3.34.0/Makefile.in      | 2 +-
 tcl/pkgs/tdbc1.1.2/Makefile.in         | 2 +-
 tcl/pkgs/tdbcmysql1.1.2/Makefile.in    | 2 +-
 tcl/pkgs/tdbcodbc1.1.2/Makefile.in     | 2 +-
 tcl/pkgs/tdbcpostgres1.1.2/Makefile.in | 2 +-
 tcl/pkgs/tdbcsqlite3-1.1.2/Makefile.in | 2 +-
 tcl/pkgs/thread2.8.6/Makefile.in       | 2 +-
 tcl/unix/Makefile.in                   | 2 +-
 9 files changed, 9 insertions(+), 9 deletions(-)

diff --git a/tcl/pkgs/itcl4.2.1/Makefile.in b/tcl/pkgs/itcl4.2.1/Makefile.in
index 3fd49ccb8a..e02028ff9d 100644
--- a/tcl/pkgs/itcl4.2.1/Makefile.in
+++ b/tcl/pkgs/itcl4.2.1/Makefile.in
@@ -132,7 +132,7 @@ TCL_SRC_DIR	= @TCL_SRC_DIR@
 EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR)
 #EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR):$(TK_BIN_DIR)
 TCLLIBPATH	= $(top_builddir)
-TCLSH_ENV	= TCL_LIBRARY=`@CYGPATH@ $(TCL_SRC_DIR)/library`
+TCLSH_ENV	= TCL_LIBRARY=$(TCL_LIBRARY)
 PKG_ENV		= @LD_LIBRARY_PATH_VAR@="$(EXTRA_PATH):$(@LD_LIBRARY_PATH_VAR@)" \
 		  PATH="$(EXTRA_PATH):$(PATH)" \
 		  ITCL_LIBRARY=`@CYGPATH@ $(srcdir)/library` \
diff --git a/tcl/pkgs/sqlite3.34.0/Makefile.in b/tcl/pkgs/sqlite3.34.0/Makefile.in
index a1a744aa67..4a32b76169 100644
--- a/tcl/pkgs/sqlite3.34.0/Makefile.in
+++ b/tcl/pkgs/sqlite3.34.0/Makefile.in
@@ -132,7 +132,7 @@ TCL_SRC_DIR	= @TCL_SRC_DIR@
 EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR)
 #EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR):$(TK_BIN_DIR)
 TCLLIBPATH	= $(top_builddir)
-TCLSH_ENV	= TCL_LIBRARY=`@CYGPATH@ $(TCL_SRC_DIR)/library` \
+TCLSH_ENV	= TCL_LIBRARY=$(TCL_LIBRARY) \
 		  @LD_LIBRARY_PATH_VAR@="$(EXTRA_PATH):$(@LD_LIBRARY_PATH_VAR@)" \
 		  PATH="$(EXTRA_PATH):$(PATH)" \
 		  TCLLIBPATH="$(TCLLIBPATH)"
diff --git a/tcl/pkgs/tdbc1.1.2/Makefile.in b/tcl/pkgs/tdbc1.1.2/Makefile.in
index 9995001fac..52263ad533 100644
--- a/tcl/pkgs/tdbc1.1.2/Makefile.in
+++ b/tcl/pkgs/tdbc1.1.2/Makefile.in
@@ -128,7 +128,7 @@ TCL_SRC_DIR	= @TCL_SRC_DIR@
 EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR)
 #EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR):$(TK_BIN_DIR)
 TCLLIBPATH	= $(top_builddir)
-TCLSH_ENV	= TCL_LIBRARY=`@CYGPATH@ $(TCL_SRC_DIR)/library`
+TCLSH_ENV	= TCL_LIBRARY=$(TCL_LIBRARY)
 PKG_ENV		= @LD_LIBRARY_PATH_VAR@="$(EXTRA_PATH):$(@LD_LIBRARY_PATH_VAR@)" \
 		  PATH="$(EXTRA_PATH):$(PATH)" \
 		  TDBC_LIBRARY=`@CYGPATH@ $(srcdir)/library` \
diff --git a/tcl/pkgs/tdbcmysql1.1.2/Makefile.in b/tcl/pkgs/tdbcmysql1.1.2/Makefile.in
index b8a4330918..8282ccf1c9 100644
--- a/tcl/pkgs/tdbcmysql1.1.2/Makefile.in
+++ b/tcl/pkgs/tdbcmysql1.1.2/Makefile.in
@@ -133,7 +133,7 @@ TDBC_LIB_FILE	= @TDBC_LIB_FILE@
 EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR)
 #EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR):$(TK_BIN_DIR)
 TCLLIBPATH	= $(top_builddir) $(TDBC_BIN_DIR)
-TCLSH_ENV	= TCL_LIBRARY=`@CYGPATH@ $(TCL_SRC_DIR)/library`
+TCLSH_ENV	= TCL_LIBRARY=$(TCL_LIBRARY)
 PKG_ENV		= @LD_LIBRARY_PATH_VAR@="$(EXTRA_PATH):$(@LD_LIBRARY_PATH_VAR@)" \
 		  PATH="$(EXTRA_PATH):$(PATH)" \
 		  TDBC_LIBRARY=`@CYGPATH@ @tdbc_LIBRARY_PATH@` \
diff --git a/tcl/pkgs/tdbcodbc1.1.2/Makefile.in b/tcl/pkgs/tdbcodbc1.1.2/Makefile.in
index 72a45aeb91..70edb16d46 100644
--- a/tcl/pkgs/tdbcodbc1.1.2/Makefile.in
+++ b/tcl/pkgs/tdbcodbc1.1.2/Makefile.in
@@ -135,7 +135,7 @@ TDBC_LIB_FILE	= @TDBC_LIB_FILE@
 EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR)
 #EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR):$(TK_BIN_DIR)
 TCLLIBPATH	= $(top_builddir) $(TDBC_BIN_DIR)
-TCLSH_ENV	= TCL_LIBRARY=`@CYGPATH@ $(TCL_SRC_DIR)/library`
+TCLSH_ENV	= TCL_LIBRARY=$(TCL_LIBRARY)
 PKG_ENV		= @LD_LIBRARY_PATH_VAR@="$(EXTRA_PATH):$(@LD_LIBRARY_PATH_VAR@)" \
 		  PATH="$(EXTRA_PATH):$(PATH)" \
 		  TDBCODBC_LIBRARY=`@CYGPATH@ $(srcdir)/library` \
diff --git a/tcl/pkgs/tdbcpostgres1.1.2/Makefile.in b/tcl/pkgs/tdbcpostgres1.1.2/Makefile.in
index df3e78df49..c6bb4159cc 100644
--- a/tcl/pkgs/tdbcpostgres1.1.2/Makefile.in
+++ b/tcl/pkgs/tdbcpostgres1.1.2/Makefile.in
@@ -133,7 +133,7 @@ TDBC_LIB_FILE	= @TDBC_LIB_FILE@
 EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR)
 #EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR):$(TK_BIN_DIR)
 TCLLIBPATH	= $(top_builddir) $(TDBC_BIN_DIR)
-TCLSH_ENV	= TCL_LIBRARY=`@CYGPATH@ $(TCL_SRC_DIR)/library`
+TCLSH_ENV	= TCL_LIBRARY=$(TCL_LIBRARY)
 PKG_ENV		= @LD_LIBRARY_PATH_VAR@="$(EXTRA_PATH):$(@LD_LIBRARY_PATH_VAR@)" \
 		  PATH="$(EXTRA_PATH):$(PATH)" \
 		  TDBC_LIBRARY=`@CYGPATH@ @tdbc_LIBRARY_PATH@` \
diff --git a/tcl/pkgs/tdbcsqlite3-1.1.2/Makefile.in b/tcl/pkgs/tdbcsqlite3-1.1.2/Makefile.in
index e809da5576..7ea594968c 100644
--- a/tcl/pkgs/tdbcsqlite3-1.1.2/Makefile.in
+++ b/tcl/pkgs/tdbcsqlite3-1.1.2/Makefile.in
@@ -134,7 +134,7 @@ TDBC_LIB_FILE	= @TDBC_LIB_FILE@
 EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR)
 #EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR):$(TK_BIN_DIR)
 TCLLIBPATH	= $(top_builddir) $(TDBC_BIN_DIR)
-TCLSH_ENV	= TCL_LIBRARY=`@CYGPATH@ $(TCL_SRC_DIR)/library`
+TCLSH_ENV	= TCL_LIBRARY=$(TCL_LIBRARY)
 PKG_ENV		= @LD_LIBRARY_PATH_VAR@="$(EXTRA_PATH):$(@LD_LIBRARY_PATH_VAR@)" \
 		  PATH="$(EXTRA_PATH):$(PATH)" \
 		  TDBC_LIBRARY=`@CYGPATH@ @tdbc_LIBRARY_PATH@` \
diff --git a/tcl/pkgs/thread2.8.6/Makefile.in b/tcl/pkgs/thread2.8.6/Makefile.in
index 3beabe74de..2c2a65b4f0 100644
--- a/tcl/pkgs/thread2.8.6/Makefile.in
+++ b/tcl/pkgs/thread2.8.6/Makefile.in
@@ -128,7 +128,7 @@ TCL_SRC_DIR	= @TCL_SRC_DIR@
 EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR)
 #EXTRA_PATH	= $(top_builddir):$(TCL_BIN_DIR):$(TK_BIN_DIR)
 TCLLIBPATH	= $(top_builddir)
-TCLSH_ENV	= TCL_LIBRARY=`@CYGPATH@ $(TCL_SRC_DIR)/library`
+TCLSH_ENV	= TCL_LIBRARY=$(TCL_LIBRARY)
 PKG_ENV		= TCL_THREAD_LIBRARY=`@CYGPATH@ $(srcdir)/lib` \
 		  @LD_LIBRARY_PATH_VAR@="$(EXTRA_PATH):$(@LD_LIBRARY_PATH_VAR@)" \
 		  PATH="$(EXTRA_PATH):$(PATH)" \
diff --git a/tcl/unix/Makefile.in b/tcl/unix/Makefile.in
index 2f2ac53b23..7c2243098e 100644
--- a/tcl/unix/Makefile.in
+++ b/tcl/unix/Makefile.in
@@ -236,7 +236,7 @@ PKGS_DIR		= $(TOP_DIR)/pkgs
 # Must be absolute because of the cd dltest $(DLTEST_DIR)/configure below.
 DLTEST_DIR		= @TCL_SRC_DIR@/unix/dltest
 # Must be absolute to so the corresponding tcltest's tcl_library is absolute.
-TCL_BUILDTIME_LIBRARY	= @TCL_SRC_DIR@/library
+TCL_BUILDTIME_LIBRARY	= $(TOP_DIR)/library
 
 ZLIB_DIR		= ${COMPAT_DIR}/zlib
 ZLIB_INCLUDE		= @ZLIB_INCLUDE@
-- 
2.29.2


From 9b7b1c43940b1c696de2db4bd2c51868a2acf126 Mon Sep 17 00:00:00 2001
From: "Vladimir D. Seleznev" <vseleznv@altlinux.org>
Date: Tue, 8 Oct 2019 18:29:40 +0300
Subject: [PATCH] ALT pkgs TEA

---
 tcl/pkgs/itcl4.2.2/Makefile.in           | 15 ++++++++-------
 tcl/pkgs/itcl4.2.2/configure             |  2 +-
 tcl/pkgs/sqlite3.36.0/Makefile.in        |  4 ++--
 tcl/pkgs/tdbc1.1.3/Makefile.in           | 19 ++++++++++---------
 tcl/pkgs/tdbcmysql1.1.3/Makefile.in      | 13 +++++++------
 tcl/pkgs/tdbcmysql1.1.3/tclconfig/tcl.m4 |  2 +-
 tcl/pkgs/tdbcodbc1.1.3/Makefile.in       | 13 +++++++------
 tcl/pkgs/tdbcpostgres1.1.3/Makefile.in   | 13 +++++++------
 tcl/pkgs/tdbcsqlite3-1.1.3/Makefile.in   | 13 +++++++------
 tcl/pkgs/thread2.8.7/Makefile.in         | 15 ++++++++-------
 10 files changed, 58 insertions(+), 51 deletions(-)

diff --git a/tcl/pkgs/itcl4.2.2/Makefile.in b/tcl/pkgs/itcl4.2.2/Makefile.in
index 5b2d793d7d..d277095cd9 100644
--- a/tcl/pkgs/itcl4.2.2/Makefile.in
+++ b/tcl/pkgs/itcl4.2.2/Makefile.in
@@ -84,8 +84,8 @@ mandir		= @mandir@
 DESTDIR		=
 
 PKG_DIR		= $(PACKAGE_NAME)$(PACKAGE_VERSION)
-pkgdatadir	= $(datadir)/$(PKG_DIR)
-pkglibdir	= $(libdir)/$(PKG_DIR)
+pkgdatadir	= $(libdir)/tcl/$(PKG_DIR)
+pkglibdir	= $(libdir)/tcl/$(PKG_DIR)
 pkgincludedir	= $(includedir)/$(PKG_DIR)
 
 top_builddir	= @abs_top_builddir@
@@ -409,6 +409,7 @@ distclean: clean
 #========================================================================
 
 install-lib-binaries: binaries
+	@mkdir -p "$(DESTDIR)$(pkglibdir)" "$(DESTDIR)$(pkgdatadir)"
 	@$(INSTALL_DATA_DIR) "$(DESTDIR)$(pkglibdir)"
 	@list='$(lib_BINARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
@@ -427,15 +428,15 @@ install-lib-binaries: binaries
 	@list='$(PKG_TCL_SOURCES)'; for p in $$list; do \
 	  if test -f $(srcdir)/$$p; then \
 	    destp=`basename $$p`; \
-	    echo " Install $$destp $(DESTDIR)$(pkglibdir)/$$destp"; \
-	    $(INSTALL_DATA) $(srcdir)/$$p "$(DESTDIR)$(pkglibdir)/$$destp"; \
+	    echo " Install $$destp $(DESTDIR)$(pkgdatadir)/$$destp"; \
+	    $(INSTALL_DATA) $(srcdir)/$$p "$(DESTDIR)$(pkgdatadir)/$$destp"; \
 	  fi; \
 	done
 	@if test "x$(SHARED_BUILD)" = "x1"; then \
-	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkglibdir)"; \
-	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkglibdir)"; \
+	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkgdatadir)"; \
+	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkgdatadir)"; \
 	fi
-	$(INSTALL_DATA) itclConfig.sh "$(DESTDIR)$(pkglibdir)"
+	$(INSTALL_DATA) itclConfig.sh "$(DESTDIR)$(libdir)"
 
 #========================================================================
 # Install binary executables (e.g. .exe files and dependent .dll files)
diff --git a/tcl/pkgs/itcl4.2.2/configure b/tcl/pkgs/itcl4.2.2/configure
index d9430f7ac4..394fe97ee1 100755
--- a/tcl/pkgs/itcl4.2.2/configure
+++ b/tcl/pkgs/itcl4.2.2/configure
@@ -9165,7 +9165,7 @@ printf "%s\n" "${TCLSH_PROG}" >&6; }
     #--------------------------------------------------------------------
 
     # pkglibdir must be a fully qualified path and (not ${exec_prefix}/lib)
-    eval pkglibdir="${libdir}/itcl${PACKAGE_VERSION}"
+    eval pkglibdir="${libdir}/tcl/${PACKAGE_NAME}${PACKAGE_VERSION}"
     if test "${TCL_LIB_VERSIONS_OK}" = "ok"; then
 	eval itcl_LIB_FLAG="-litcl${PACKAGE_VERSION}"
 	eval itcl_STUB_LIB_FLAG="-litclstub${PACKAGE_VERSION}"
diff --git a/tcl/pkgs/sqlite3.36.0/Makefile.in b/tcl/pkgs/sqlite3.36.0/Makefile.in
index 72a147e9f3..41cf175e04 100644
--- a/tcl/pkgs/sqlite3.36.0/Makefile.in
+++ b/tcl/pkgs/sqlite3.36.0/Makefile.in
@@ -409,8 +409,8 @@ install-lib-binaries: binaries
 	  fi; \
 	done
 	@if test "x$(SHARED_BUILD)" = "x1"; then \
-	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkglibdir)"; \
-	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkglibdir)"; \
+	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkgdatadir)"; \
+	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkgdatadir)"; \
 	fi
 
 #========================================================================
diff --git a/tcl/pkgs/tdbc1.1.3/Makefile.in b/tcl/pkgs/tdbc1.1.3/Makefile.in
index 578257e5ec..3b1bbc63da 100644
--- a/tcl/pkgs/tdbc1.1.3/Makefile.in
+++ b/tcl/pkgs/tdbc1.1.3/Makefile.in
@@ -82,8 +82,8 @@ mandir		= @mandir@
 DESTDIR		=
 
 PKG_DIR		= $(PACKAGE_NAME)$(PACKAGE_VERSION)
-pkgdatadir	= $(datadir)/$(PKG_DIR)
-pkglibdir	= $(libdir)/$(PKG_DIR)
+pkgdatadir	= $(libdir)/tcl/$(PKG_DIR)
+pkglibdir	= $(libdir)/tcl/$(PKG_DIR)
 pkgincludedir	= $(includedir)/$(PKG_DIR)
 
 top_builddir	= @abs_top_builddir@
@@ -431,6 +431,7 @@ distclean: clean
 #========================================================================
 
 install-lib-binaries: binaries
+	@mkdir -p "$(DESTDIR)$(pkglibdir)" "$(DESTDIR)$(pkgdatadir)"
 	@$(INSTALL_DATA_DIR) "$(DESTDIR)$(pkglibdir)"
 	@list='$(lib_BINARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
@@ -440,7 +441,7 @@ install-lib-binaries: binaries
 	    if test "x$$ext" = "xdll"; then \
 		lib=`basename $$p|sed -e 's/.[^.]*$$//'`.lib; \
 		if test -f $$lib; then \
-		    echo " $(INSTALL_DATA) $$lib $(DESTDIR)$(pkglibdir)/$$lib"; \
+		    echo " $(INSTALL_DATA) $$lib $(DESTDIR)$(pkgdir)/$$lib"; \
 	            $(INSTALL_DATA) $$lib "$(DESTDIR)$(pkglibdir)/$$lib"; \
 		fi; \
 	    fi; \
@@ -449,16 +450,16 @@ install-lib-binaries: binaries
 	@list='$(PKG_TCL_SOURCES)'; for p in $$list; do \
 	  if test -f $(srcdir)/$$p; then \
 	    destp=`basename $$p`; \
-	    echo " Install $$destp $(DESTDIR)$(pkglibdir)/$$destp"; \
-	    $(INSTALL_DATA) $(srcdir)/$$p "$(DESTDIR)$(pkglibdir)/$$destp"; \
+	    echo " Install $$destp $(DESTDIR)$(pkgdatadir)/$$destp"; \
+	    $(INSTALL_DATA) $(srcdir)/$$p "$(DESTDIR)$(pkgdatadir)/$$destp"; \
 	  fi; \
 	done
 	@if test "x$(SHARED_BUILD)" = "x1"; then \
-	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkglibdir)"; \
-	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkglibdir)"; \
+	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkgdatadir)"; \
+	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkgdatadir)"; \
 	fi
-	@echo " Install tdbcConfig.sh $(DESTDIR)$(pkglibdir)"; \
-	$(INSTALL_DATA) tdbcConfig.sh $(DESTDIR)$(pkglibdir)/tdbcConfig.sh
+	@echo " Install tdbcConfig.sh $(DESTDIR)$(libdir)"; \
+	$(INSTALL_DATA) tdbcConfig.sh $(DESTDIR)$(libdir)/tdbcConfig.sh
 
 #========================================================================
 # Install binary executables (e.g. .exe files and dependent .dll files)
diff --git a/tcl/pkgs/tdbcmysql1.1.3/Makefile.in b/tcl/pkgs/tdbcmysql1.1.3/Makefile.in
index 67bd0083ef..43dbd71ad4 100644
--- a/tcl/pkgs/tdbcmysql1.1.3/Makefile.in
+++ b/tcl/pkgs/tdbcmysql1.1.3/Makefile.in
@@ -82,8 +82,8 @@ mandir		= @mandir@
 DESTDIR		=
 
 PKG_DIR		= $(PACKAGE_NAME)$(PACKAGE_VERSION)
-pkgdatadir	= $(datadir)/$(PKG_DIR)
-pkglibdir	= $(libdir)/$(PKG_DIR)
+pkgdatadir	= $(libdir)/tcl/$(PKG_DIR)
+pkglibdir	= $(libdir)/tcl/$(PKG_DIR)
 pkgincludedir	= $(includedir)/$(PKG_DIR)
 
 top_builddir	= @abs_top_builddir@
@@ -427,6 +427,7 @@ distclean: clean
 #========================================================================
 
 install-lib-binaries: binaries
+	@mkdir -p "$(DESTDIR)$(pkglibdir)" "$(DESTDIR)$(pkgdatadir)"
 	@$(INSTALL_DATA_DIR) "$(DESTDIR)$(pkglibdir)"
 	@list='$(lib_BINARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
@@ -445,13 +446,13 @@ install-lib-binaries: binaries
 	@list='$(PKG_TCL_SOURCES)'; for p in $$list; do \
 	  if test -f $(srcdir)/$$p; then \
 	    destp=`basename $$p`; \
-	    echo " Install $$destp $(DESTDIR)$(pkglibdir)/$$destp"; \
-	    $(INSTALL_DATA) $(srcdir)/$$p "$(DESTDIR)$(pkglibdir)/$$destp"; \
+	    echo " Install $$destp $(DESTDIR)$(pkgdatadir)/$$destp"; \
+	    $(INSTALL_DATA) $(srcdir)/$$p "$(DESTDIR)$(pkgdatadir)/$$destp"; \
 	  fi; \
 	done
 	@if test "x$(SHARED_BUILD)" = "x1"; then \
-	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkglibdir)"; \
-	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkglibdir)"; \
+	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkgdatadir)"; \
+	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkgdatadir)"; \
 	fi
 
 #========================================================================
diff --git a/tcl/pkgs/tdbcmysql1.1.3/tclconfig/tcl.m4 b/tcl/pkgs/tdbcmysql1.1.3/tclconfig/tcl.m4
index 078a0daf29..d679241ffe 100644
--- a/tcl/pkgs/tdbcmysql1.1.3/tclconfig/tcl.m4
+++ b/tcl/pkgs/tdbcmysql1.1.3/tclconfig/tcl.m4
@@ -3899,7 +3899,7 @@ AC_DEFUN([TEA_EXPORT_CONFIG], [
     #--------------------------------------------------------------------
 
     # pkglibdir must be a fully qualified path and (not ${exec_prefix}/lib)
-    eval pkglibdir="[$]{libdir}/$1${PACKAGE_VERSION}"
+    eval pkglibdir="[$]{libdir}/tcl/${PACKAGE_NAME}${PACKAGE_VERSION}"
     if test "${TCL_LIB_VERSIONS_OK}" = "ok"; then
 	eval $1_LIB_FLAG="-l$1${PACKAGE_VERSION}"
 	eval $1_STUB_LIB_FLAG="-l$1stub${PACKAGE_VERSION}"
diff --git a/tcl/pkgs/tdbcodbc1.1.3/Makefile.in b/tcl/pkgs/tdbcodbc1.1.3/Makefile.in
index 8ca0b3e7be..46a013311f 100644
--- a/tcl/pkgs/tdbcodbc1.1.3/Makefile.in
+++ b/tcl/pkgs/tdbcodbc1.1.3/Makefile.in
@@ -82,8 +82,8 @@ mandir		= @mandir@
 DESTDIR		=
 
 PKG_DIR		= $(PACKAGE_NAME)$(PACKAGE_VERSION)
-pkgdatadir	= $(datadir)/$(PKG_DIR)
-pkglibdir	= $(libdir)/$(PKG_DIR)
+pkgdatadir	= $(libdir)/tcl/$(PKG_DIR)
+pkglibdir	= $(libdir)/tcl/$(PKG_DIR)
 pkgincludedir	= $(includedir)/$(PKG_DIR)
 
 top_builddir	= @abs_top_builddir@
@@ -439,6 +439,7 @@ distclean: clean
 #========================================================================
 
 install-lib-binaries: binaries
+	@mkdir -p "$(DESTDIR)$(pkglibdir)" "$(DESTDIR)$(pkgdatadir)"
 	@$(INSTALL_DATA_DIR) "$(DESTDIR)$(pkglibdir)"
 	@list='$(lib_BINARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
@@ -457,13 +458,13 @@ install-lib-binaries: binaries
 	@list='$(PKG_TCL_SOURCES)'; for p in $$list; do \
 	  if test -f $(srcdir)/$$p; then \
 	    destp=`basename $$p`; \
-	    echo " Install $$destp $(DESTDIR)$(pkglibdir)/$$destp"; \
-	    $(INSTALL_DATA) $(srcdir)/$$p "$(DESTDIR)$(pkglibdir)/$$destp"; \
+	    echo " Install $$destp $(DESTDIR)$(pkgdatadir)/$$destp"; \
+	    $(INSTALL_DATA) $(srcdir)/$$p "$(DESTDIR)$(pkgdatadir)/$$destp"; \
 	  fi; \
 	done
 	@if test "x$(SHARED_BUILD)" = "x1"; then \
-	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkglibdir)"; \
-	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkglibdir)"; \
+	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkgdatadir)"; \
+	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkgdatadir)"; \
 	fi
 
 #========================================================================
diff --git a/tcl/pkgs/tdbcpostgres1.1.3/Makefile.in b/tcl/pkgs/tdbcpostgres1.1.3/Makefile.in
index 9b523d2025..14d011a2f4 100644
--- a/tcl/pkgs/tdbcpostgres1.1.3/Makefile.in
+++ b/tcl/pkgs/tdbcpostgres1.1.3/Makefile.in
@@ -82,8 +82,8 @@ mandir		= @mandir@
 DESTDIR		=
 
 PKG_DIR		= $(PACKAGE_NAME)$(PACKAGE_VERSION)
-pkgdatadir	= $(datadir)/$(PKG_DIR)
-pkglibdir	= $(libdir)/$(PKG_DIR)
+pkgdatadir	= $(libdir)/tcl/$(PKG_DIR)
+pkglibdir	= $(libdir)/tcl/$(PKG_DIR)
 pkgincludedir	= $(includedir)/$(PKG_DIR)
 
 top_builddir	= @abs_top_builddir@
@@ -429,6 +429,7 @@ distclean: clean
 #========================================================================
 
 install-lib-binaries: binaries
+	@mkdir -p "$(DESTDIR)$(pkglibdir)" "$(DESTDIR)$(pkgdatadir)"
 	@$(INSTALL_DATA_DIR) "$(DESTDIR)$(pkglibdir)"
 	@list='$(lib_BINARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
@@ -447,13 +448,13 @@ install-lib-binaries: binaries
 	@list='$(PKG_TCL_SOURCES)'; for p in $$list; do \
 	  if test -f $(srcdir)/$$p; then \
 	    destp=`basename $$p`; \
-	    echo " Install $$destp $(DESTDIR)$(pkglibdir)/$$destp"; \
-	    $(INSTALL_DATA) $(srcdir)/$$p "$(DESTDIR)$(pkglibdir)/$$destp"; \
+	    echo " Install $$destp $(DESTDIR)$(pkgdatadir)/$$destp"; \
+	    $(INSTALL_DATA) $(srcdir)/$$p "$(DESTDIR)$(pkgdatadir)/$$destp"; \
 	  fi; \
 	done
 	@if test "x$(SHARED_BUILD)" = "x1"; then \
-	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkglibdir)"; \
-	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkglibdir)"; \
+	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkgdatadir)"; \
+	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkgdatadir)"; \
 	fi
 
 #========================================================================
diff --git a/tcl/pkgs/tdbcsqlite3-1.1.3/Makefile.in b/tcl/pkgs/tdbcsqlite3-1.1.3/Makefile.in
index a52af1e58b..e809da5576 100644
--- a/tcl/pkgs/tdbcsqlite3-1.1.3/Makefile.in
+++ b/tcl/pkgs/tdbcsqlite3-1.1.3/Makefile.in
@@ -79,8 +79,8 @@ mandir		= @mandir@
 DESTDIR		=
 
 PKG_DIR		= $(PACKAGE_NAME)-$(PACKAGE_VERSION)
-pkgdatadir	= $(datadir)/$(PKG_DIR)
-pkglibdir	= $(libdir)/$(PKG_DIR)
+pkgdatadir	= $(libdir)/tcl/$(PKG_DIR)
+pkglibdir	= $(libdir)/tcl/$(PKG_DIR)
 pkgincludedir	= $(includedir)/$(PKG_DIR)
 
 top_builddir	= @abs_top_builddir@
@@ -403,6 +403,7 @@ distclean: clean
 #========================================================================
 
 install-lib-binaries: binaries
+	@mkdir -p $(DESTDIR)$(pkglibdir) $(DESTDIR)$(pkgdatadir)
 	@$(INSTALL_DATA_DIR) $(DESTDIR)$(pkglibdir)
 	@list='$(lib_BINARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
@@ -421,13 +422,13 @@ install-lib-binaries: binaries
 	@list='$(PKG_TCL_SOURCES)'; for p in $$list; do \
 	  if test -f $(srcdir)/$$p; then \
 	    destp=`basename $$p`; \
-	    echo " Install $$destp $(DESTDIR)$(pkglibdir)/$$destp"; \
-	    $(INSTALL_DATA) $(srcdir)/$$p $(DESTDIR)$(pkglibdir)/$$destp; \
+	    echo " Install $$destp $(DESTDIR)$(pkgdatadir)/$$destp"; \
+	    $(INSTALL_DATA) $(srcdir)/$$p $(DESTDIR)$(pkgdatadir)/$$destp; \
 	  fi; \
 	done
 	@if test "x$(SHARED_BUILD)" = "x1"; then \
-	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkglibdir)"; \
-	    $(INSTALL_DATA) pkgIndex.tcl $(DESTDIR)$(pkglibdir); \
+	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkgdatadir)"; \
+	    $(INSTALL_DATA) pkgIndex.tcl $(DESTDIR)$(pkgdatadir); \
 	fi
 
 #========================================================================
diff --git a/tcl/pkgs/thread2.8.7/Makefile.in b/tcl/pkgs/thread2.8.7/Makefile.in
index 85c200e9e6..e7ae3d634c 100644
--- a/tcl/pkgs/thread2.8.7/Makefile.in
+++ b/tcl/pkgs/thread2.8.7/Makefile.in
@@ -82,8 +82,8 @@ mandir		= @mandir@
 DESTDIR		=
 
 PKG_DIR		= $(PACKAGE_NAME)$(PACKAGE_VERSION)
-pkgdatadir	= $(datadir)/$(PKG_DIR)
-pkglibdir	= $(libdir)/$(PKG_DIR)
+pkgdatadir	= $(libdir)/tcl/$(PKG_DIR)
+pkglibdir	= $(libdir)/tcl/$(PKG_DIR)
 pkgincludedir	= $(includedir)/$(PKG_DIR)
 
 top_builddir	= .
@@ -405,7 +405,8 @@ distclean: clean
 #========================================================================
 
 install-lib-binaries: binaries
-	@$(INSTALL_DATA_DIR) "$(DESTDIR)$(pkglibdir)"
+	@mkdir -p "$(DESTDIR)$(pkglibdir)" "$(DESTDIR)$(pkgdatadir)"
+	@$(INSTALL_DATA_DIR) "$(DESTDIR)$(pkgdatadir)"
 	@list='$(lib_BINARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
 	    echo " $(INSTALL_LIBRARY) $$p $(DESTDIR)$(pkglibdir)/$$p"; \
@@ -431,13 +432,13 @@ install-lib-binaries: binaries
 	@list='$(PKG_TCL_SOURCES)'; for p in $$list; do \
 	  if test -f $(srcdir)/$$p; then \
 	    destp=`basename $$p`; \
-	    echo " Install $$destp $(DESTDIR)$(pkglibdir)/$$destp"; \
-	    $(INSTALL_DATA) $(srcdir)/$$p "$(DESTDIR)$(pkglibdir)/$$destp"; \
+	    echo " Install $$destp $(DESTDIR)$(pkgdatadir)/$$destp"; \
+	    $(INSTALL_DATA) $(srcdir)/$$p "$(DESTDIR)$(pkgdatadir)/$$destp"; \
 	  fi; \
 	done
 	@if test "x$(SHARED_BUILD)" = "x1"; then \
-	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkglibdir)"; \
-	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkglibdir)"; \
+	    echo " Install pkgIndex.tcl $(DESTDIR)$(pkgdatadir)"; \
+	    $(INSTALL_DATA) pkgIndex.tcl "$(DESTDIR)$(pkgdatadir)"; \
 	fi
 
 #========================================================================
-- 
2.33.0


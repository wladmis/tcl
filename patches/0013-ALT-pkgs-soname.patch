From f8b2b0f222a0af3049862acdaf4e0d263e82448e Mon Sep 17 00:00:00 2001
From: "Vladimir D. Seleznev" <vseleznv@altlinux.org>
Date: Wed, 9 Oct 2019 17:49:53 +0300
Subject: [PATCH] ALT pkgs soname

---
 tcl/pkgs/itcl4.2.1/configure         | 2 +-
 tcl/pkgs/tdbc1.1.2/configure         | 2 +-
 tcl/pkgs/tdbcmysql1.1.2/configure    | 2 +-
 tcl/pkgs/tdbcodbc1.1.2/configure     | 2 +-
 tcl/pkgs/tdbcpostgres1.1.2/configure | 2 +-
 tcl/pkgs/tdbcsqlite3-1.1.2/configure | 2 +-
 tcl/pkgs/thread2.8.6/configure       | 2 +-
 7 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/tcl/pkgs/itcl4.2.1/configure b/tcl/pkgs/itcl4.2.1/configure
index 369bf47c7f..73edb38067 100755
--- a/tcl/pkgs/itcl4.2.1/configure
+++ b/tcl/pkgs/itcl4.2.1/configure
@@ -6789,7 +6789,7 @@ fi
 
 	    # TEA specific: use LDFLAGS_DEFAULT instead of LDFLAGS
 	    SHLIB_LD='${CC} ${CFLAGS} ${LDFLAGS_DEFAULT} -shared'
-	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic"
+	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic,-soname,\${@}"
 
 	    case $system in
 	    DragonFly-*|FreeBSD-*)
diff --git a/tcl/pkgs/tdbc1.1.2/configure b/tcl/pkgs/tdbc1.1.2/configure
index 5a5de51b3e..561bb12e63 100755
--- a/tcl/pkgs/tdbc1.1.2/configure
+++ b/tcl/pkgs/tdbc1.1.2/configure
@@ -6902,7 +6902,7 @@ fi
 
 	    # TEA specific: use LDFLAGS_DEFAULT instead of LDFLAGS
 	    SHLIB_LD='${CC} ${CFLAGS} ${LDFLAGS_DEFAULT} -shared'
-	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic"
+	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic,-soname,\${@}"
 
 	    case $system in
 	    DragonFly-*|FreeBSD-*)
diff --git a/tcl/pkgs/tdbcmysql1.1.2/configure b/tcl/pkgs/tdbcmysql1.1.2/configure
index 87aa8dadda..9da02f0361 100755
--- a/tcl/pkgs/tdbcmysql1.1.2/configure
+++ b/tcl/pkgs/tdbcmysql1.1.2/configure
@@ -7246,7 +7246,7 @@ fi
 
 	    # TEA specific: use LDFLAGS_DEFAULT instead of LDFLAGS
 	    SHLIB_LD='${CC} ${CFLAGS} ${LDFLAGS_DEFAULT} -shared'
-	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic"
+	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic,-soname,\${@}"
 
 	    case $system in
 	    DragonFly-*|FreeBSD-*)
diff --git a/tcl/pkgs/tdbcodbc1.1.2/configure b/tcl/pkgs/tdbcodbc1.1.2/configure
index eb7bfa129f..da9618e28f 100755
--- a/tcl/pkgs/tdbcodbc1.1.2/configure
+++ b/tcl/pkgs/tdbcodbc1.1.2/configure
@@ -7246,7 +7246,7 @@ fi
 
 	    # TEA specific: use LDFLAGS_DEFAULT instead of LDFLAGS
 	    SHLIB_LD='${CC} ${CFLAGS} ${LDFLAGS_DEFAULT} -shared'
-	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic"
+	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic,-soname,\${@}"
 
 	    case $system in
 	    DragonFly-*|FreeBSD-*)
diff --git a/tcl/pkgs/tdbcpostgres1.1.2/configure b/tcl/pkgs/tdbcpostgres1.1.2/configure
index 22e30b3532..d48f952c65 100755
--- a/tcl/pkgs/tdbcpostgres1.1.2/configure
+++ b/tcl/pkgs/tdbcpostgres1.1.2/configure
@@ -7246,7 +7246,7 @@ fi
 
 	    # TEA specific: use LDFLAGS_DEFAULT instead of LDFLAGS
 	    SHLIB_LD='${CC} ${CFLAGS} ${LDFLAGS_DEFAULT} -shared'
-	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic"
+	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic,-soname,\${@}"
 
 	    case $system in
 	    DragonFly-*|FreeBSD-*)
diff --git a/tcl/pkgs/tdbcsqlite3-1.1.2/configure b/tcl/pkgs/tdbcsqlite3-1.1.2/configure
index 15ad261f65..42b296c372 100755
--- a/tcl/pkgs/tdbcsqlite3-1.1.2/configure
+++ b/tcl/pkgs/tdbcsqlite3-1.1.2/configure
@@ -5586,7 +5586,7 @@ fi
 
 	    # TEA specific: use LDFLAGS_DEFAULT instead of LDFLAGS
 	    SHLIB_LD='${CC} ${CFLAGS} ${LDFLAGS_DEFAULT} -shared'
-	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic"
+	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic,-soname,\${@}"
 
 	    case $system in
 	    DragonFly-*|FreeBSD-*)
diff --git a/tcl/pkgs/thread2.8.6/configure b/tcl/pkgs/thread2.8.6/configure
index 6e32fd85cf..14457e8951 100755
--- a/tcl/pkgs/thread2.8.6/configure
+++ b/tcl/pkgs/thread2.8.6/configure
@@ -7338,7 +7338,7 @@ fi
 
 	    # TEA specific: use LDFLAGS_DEFAULT instead of LDFLAGS
 	    SHLIB_LD='${CC} ${CFLAGS} ${LDFLAGS_DEFAULT} -shared'
-	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic"
+	    LDFLAGS="$LDFLAGS -Wl,--export-dynamic,-soname,\${@}"
 
 	    case $system in
 	    DragonFly-*|FreeBSD-*)
-- 
2.29.2

